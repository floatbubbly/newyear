/**
*
* particles pluging by tide@gamesofa.com 2017/2/09
* require greensock TweenMax
*
* 2017/8/3 fixed position problem
*
 **/
!function(t){t.fn.particle=function(e){function a(){d.css("overflow","hidden"),i();for(var t=0;t<c.total;t++){var e=document.createElement("div");TweenLite.set(e,{width:c.width,height:c.height,background:"url("+c.background+")",position:"absolute",top:0,left:0}),d.append(e),m.push(e),n(e)}}function n(t){var e,a,i,s;switch(_=r(0,10)<c.front_probalility,TweenLite.set(t,{x:r(u.x_start,u.x_end),y:r(u.y_start,u.y_end),opacity:_?r(c.opacity_f_min,c.opacity_f_max):r(c.opacity_b_min,c.opacity_b_max),zIndex:_?c.front_zIndex+1:c.front_zIndex-1,scale:_?r(c.scale_f_min,c.scale_f_max):r(c.scale_b_min,c.scale_b_max)}),c.direction){case"bottom":e=o(h),a=r(l/2,l),i=e+r(-c.strength,c.strength),s=-10;break;case"top":e=o(h),a=r(l/2,l),i=e+r(-c.strength,c.strength),s=l+10;break;case"right":e=o(h)-100,a=o(l),i=-100,s=a+r(-c.strength,c.strength);break;case"left":e=o(h)-100,a=o(l),i=h+100,s=a+r(-c.strength,c.strength);break;case"leftTop":e=o(h)-100,a=r(l/2,l),i=h+100,s=l+o(500)}TweenLite.to(t,r(c.duration_min,c.duration_max),{bezier:{values:[{x:e,y:a},{x:i,y:s}],autoRotate:!0},rotationX:o(c.rotationX),rotationY:o(c.rotationY),rotationZ:o(c.rotationZ),ease:Power0.easeNone,onComplete:n,onCompleteParams:[t]})}function i(){switch(c.direction){case"bottom":u={x_start:-50,x_end:h,y_start:l+10,y_end:l+c.distance};break;case"top":u={x_start:-50,x_end:h,y_start:-c.distance,y_end:-50};break;case"left":u={x_start:-50,x_end:-c.distance,y_start:0,y_end:l};break;case"leftTop":u={x_start:-50,x_end:-c.distance,y_start:-50,y_end:o(10)};break;case"right":u={x_start:h+50,x_end:h+c.distance,y_start:0,y_end:l}}}function o(t){return Math.random()*Number(t)}function r(t,e){var a=100;return Math.round((Math.random()*(Number(e)-Number(t))+Number(t))*a)/a}var _,s={width:20,height:20,background:"images/light.png",total:30,duration_min:5,duration_max:12,front_zIndex:10,front_probalility:3,direction:"bottom",opacity_f_min:.8,opacity_f_max:1,opacity_b_min:.3,opacity_b_max:.6,scale_f_min:1,scale_f_max:1.5,scale_b_min:.2,scale_b_max:.4,rotationX:0,rotationY:0,rotationZ:0,distance:800,strength:400},c=t.extend({},s,e),d=t(this),h=d.width()<100?1920:d.width(),l=d.height()<100?600:d.height(),m=[],u={x_start:null,x_end:null,y_start:null,y_end:null};a(),t(window).resize(function(){h=d.width()<100?1920:d.width()})}}(jQuery);